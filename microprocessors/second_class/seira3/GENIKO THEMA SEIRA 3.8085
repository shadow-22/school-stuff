ORG 0800H
MVI D,01H      ; ANAVEI TO LAMPAKI
MVI C,01H      ; METRAEI ARITHMO OLISTHSEWN(RLC,RRC), EPISIS GIA DELB
MVI E,00H

MVI A,01H
CMA
STA 3000H

;///    
LXI H,0B00H
MVI M,00H
INX H
MVI M,1BH      ; EMFANHSE TO "FLOOR",M
INX H
MVI M,15H     
INX H
MVI M,15H
INX H
MVI M,12H
INX H
MVI M,0FH
LXI H,0B00H
;///
JMP START1

MOV B,D
LXI D,0B00H
CALL STDM
CALL DCD
MOV D,B

INR E

START2:
DCR E
START1:

LXI H,0B00H
MOV M,E
MOV B,D
LXI D,0B00H
CALL STDM
CALL DCD
MOV D,B

START3:

CALL KIND
MOV E,A
LDA 2000H
CPI 7FH
JZ CALL1
CPI FFH
JZ CALL2
JMP START3

;/////

CALL1:
MOV A,E
CPI 07H
JP START3
B:
SUB C
JM CHANGE

SHOW1:
MOV A,D
CMA 
STA 3000H
;////      GIA FLOOR
;LXI H,0B00H
;MOV M,E
;MOV B,D
;LXI D,0B00H
;CALL STDM
;CALL DCD
;MOV D,B
;////
MOV A,C
MVI B,03H
MVI C,E8H
CALL DELB
MOV C,A
MOV A,E
SUB C
JM START1

FORWARD:
MOV A,D
RLC
MOV D,A
INR C
JMP SHOW1

CHANGE:
INR E   ; XWRIS AUTO STHN EPISTROFH KANEI ENA PARAPANW

SHOW2:
MOV A,D
CMA
STA 3000H
MOV A,C
MVI B,03H
MVI C,E8H
CALL DELB
MOV C,A
MOV A,E
SUB C
JP START2

REVERSE:
MOV A,D
RRC
MOV D,A
DCR C
JMP SHOW2

;/////

CALL2:

MOV A,E
CPI 08H
JM START3
CPI 0FH
JZ START3
SUI 08H
MOV E,A
JMP B

END