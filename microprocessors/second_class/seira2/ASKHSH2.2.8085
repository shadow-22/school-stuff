ORG 0800H

JMP START1

START2:    ; SYNEXHS LEITOYRGIA
LDA 2000H
SUB H   
JZ START2  ; ANAMONH DIAFORETIKHS EISODOY

START1:

MVI B,00H  ; ARXIKOPOIHSH
MVI C,00H  ; LSB, X+1 XRONOKATHISTERI
MVI E,64H  ; 100 FORES KALESMA DELB GIA X+1
MVI D,00H  ; MSB, Y+1 EPANALIPSEIS ANAVOSBHMATOS

LDA 2000H 
MOV H,A    ; FYLAKSH THS PROHGOYMENHS EISODOY
ANI F0H ; 4 MSB
RLC
RLC
RLC
RLC        ; SWSTH STOIXISH
INR A      ; Y+1
MOV D,A
LDA 2000H
ANI 0FH    ; 4 LSB
INR A      ; X+1
MOV C,A

AGAIN:
CALL ON1
CALL OFF1
DCR D      ; EPANALHPSH ANABOSBIMATOS
JNZ AGAIN  ; GIA Y+1 FORES
JZ END1    ; XWRIS AUTO KANEI +1 ON(TO APOKATW) KAI CRASHAREI LOGW RET

ON1:       ; ANAMA
MVI A,00H  ; ANASTROFH LOGIKH
STA 3000H  ; EKSODOS
JMP DELAY  ; XRONOKATHISTERISI
RET        ; EPISTROFH

OFF1:
MVI A,FFH
STA 3000H
JMP DELAY
RET

DELAY:
CALL DELB  ; KALESMA DELB GIA X+1
DCR E      ; MEIWSH MEXRI NA GINEI TO 100-0
JNZ DELAY  ; 100 FORES EPANALIPSI GIA DELB=X+1
RET        ; EPISTROFH

END1:      ; TELOS EKSODOU GIA THN EISODO
JMP START2 ; KSANA APO THN ARXH
END