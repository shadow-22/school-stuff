ORG 0800H
IN 10H           ;апемеяцопоигсг пяостасиас лмглгс

LXI H,0900H     ;аявийопоигсг диеухумсгс лмглгс
MVI C,00H       ;аявийопоигсг летягтг (0-255)

SAVE:           ;апохгйеусг аяихлым стг лмглг
MOV M,C         ;апохгйеусг аяихлоу стг  тяевоуса диеухумсг лмглгс
INX H           ;аунгсг йата 1 тгс диеухумсгс лмглгс
INR C           ;аунгсг йата  тоу аяихлоу
MOV A,C         
CPI 00H         ;/ам о аяихлос еимаи 0 (255+1), 
JNZ SAVE        ;/г диадийасиа апохгйеусгс окойкгяыхгйе


LXI B,0000H     ; BC <--- аяихлос ломадым
MVI D,00H       ; D  <--- летягтгс (0-255)
LXI H,0900H     ; аявийопоигсг диеухумсгс лмглгс

COUNT:          ;летягсг ломадым
MVI E,08H       ;летягтгс ьгжиым
MOV A,M
           
ACE:            ;/ лесы 8 диадовийым аяистеяым окисхгсеым екецветаи йахе 
RLC             ;/ ьгжио тоу тяевомтос аяихлоу (BYTE) ам еимаи 1.
JNC SKIP1       ;/ AN EINAI 1, о йатавыягтгс бC аунаметаи йата 1.
INX B           ;/ 
SKIP1:          ;/
DCR E           ;/
JNZ ACE         ;/

INX H           ;аунгсг йата 1 тгс диеухумсгс лмглгс
INR D           ;аунгсг йата 1 тоу летягтг 
MOV A,D
CPI 00H         ;/ам о аяихлос еимаи 0 (255+1), 
JNZ COUNT       ;/г диадийасиа летягсгс ломадым окойкгяыхгйе    


MVI A,60H       ;/о упокоцислос тоу пкгхоус аяихлым летану 10г йаи 60г
SUI 10H         ;/циметаи ажаияымтас то 10г апо то 60г.
MOV D,A         ;/то апотекесла апохгйеуетаи стом йатавыягтг D.

LED:            ;елжамисг йатаккгкоу йатавыягтг ста LED енодоу
LDA 2000H       ;кгьг еисодоу
RLC             ;/екецвос 3оу диайоптг (евеи тг лецакутеяг пяотеяаиотгта)
RLC             ;/лесы 3 диадовийым аяистеяым окисхгсеым
RLC             ;/
JC SHOW_D       ;/ам о 3ос диайоптгс еимаи ом елжамифетаи ста LED O йатавыягтгс D
LDA 2000H       
RLC             ;/екецвос 2оу диайоптг лесы 2 диадовийым аяистеяым окисхгсеым
RLC             ;/ам о 2ос диайоптгс еимаи ом (йаи о 3ос оFF)  
JC SHOW_B       ;/елжамифетаи ста LED енодоу о йатавыягтгс B
LDA 2000H
RLC             ;/екецвос 1оу диайоптг. ам аутос еимаи ом (йаи ои аккои OFF)
JC SHOW_C       ;/елжамифетаи ста LED енодоу о йатавыягтгс C
JMP LED         ;ам окес ои еисодои еимаи 0 пеяилеме левяи ма цимеи йапоиа 1

SHOW_D:         ;елжамисг йатавытгтг D
MOV A,D         
CMA             
STA 3000H       
JMP LED         ;/сумевгс кеитоуяциа циа тгм алесг емаккацг тым еисодым 
                ;/йаи том еуйокотеяо екецво тгс ояхотгтас тоу пяоцяаллатос  

SHOW_B:         ;елжамисг йатавыягтг B
MOV A,B           
CMA
STA 3000H
JMP LED

SHOW_C:         ;елжамисг йатавыягтг C
MOV A,C
CMA
STA 3000H
JMP LED

END
